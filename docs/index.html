async function signMessage() {
    if (!wallet) {
        alert("Please connect your wallet first.");
        return;
    }

    try {
        // âœ… Prepare the message
        const messageString = "Sign-in to Rugcheck.xyz" + wallet.publicKey.toBase58() + Math.floor(Date.now() / 1000);
        console.log("ğŸ“œ Message to sign:", messageString);

        // âœ… Sign the message
        const signedMessage = await wallet.signMessage(new TextEncoder().encode(messageString));
        console.log("âœ… Signed Message Response:", signedMessage);

        if (!signedMessage || !signedMessage.signature) {
            throw new Error("âŒ Solflare did not return a valid signature.");
        }

        // âœ… Convert Uint8Array to Base58 correctly
        if (typeof bs58 === "undefined") {
            throw new Error("âŒ bs58 library is not loaded properly.");
        }

        const signatureArray = new Uint8Array(signedMessage.signature);
        const base58Signature = bs58.encode(signatureArray);
        console.log("âœ… Final Signature (Base58):", base58Signature);

        // âœ… Show signature on the page
        document.getElementById("signature").innerText = base58Signature;

    } catch (err) {
        console.error("âŒ Signing failed", err);
        alert("Signing failed: " + err.message);
    }
}
