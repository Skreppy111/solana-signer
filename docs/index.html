async function signMessage() {
    if (!wallet) {
        alert("Please connect your wallet first.");
        return;
    }

    try {
        // âœ… Use plain string instead of TextEncoder
        const messageString = "Sign-in to Rugcheck.xyz" + wallet.publicKey.toBase58() + Math.floor(Date.now() / 1000);
        console.log("ğŸ“œ Message to sign:", messageString);

        // âœ… Ensure wallet.signMessage() is correctly used
        const signedMessage = await wallet.signMessage(new TextEncoder().encode(messageString));
        console.log("âœ… Signed Message Response:", signedMessage);

        if (!signedMessage || !signedMessage.signature) {
            throw new Error("âŒ Solflare did not return a valid signature.");
        }

        // âœ… Convert signature to Base58 format
        const base58Signature = bs58.encode(new Uint8Array(signedMessage.signature));
        console.log("âœ… Final Signature (Base58):", base58Signature);

        document.getElementById("signature").innerText = base58Signature;

    } catch (err) {
        console.error("âŒ Signing failed", err);
        alert("Signing failed: " + err.message);
    }
}
